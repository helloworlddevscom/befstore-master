"use strict";var WPMailSMTP=window.WPMailSMTP||{};WPMailSMTP.Admin=WPMailSMTP.Admin||{},WPMailSMTP.Admin.Logs=WPMailSMTP.Admin.Logs||function(e,i){var o={init:function(){i(e).ready(o.ready)},ready:function(){o.pageHolder=i(".wp-mail-smtp-page-logs"),o.bindActions(),o.pageHolder.hasClass("wp-mail-smtp-page-logs-archive")&&o.archive.ready(),o.pageHolder.trigger("WPMailSMTP.Admin.Logs.ready")},bindActions:function(){i(".wp-mail-smtp-page-logs-archive").on("click","#wp-mail-smtp-reset-filter .reset",o.archive.resetFilter),i(".wp-mail-smtp-page-logs-single").on("click",".js-wp-mail-smtp-pro-logs-email-delete",o.single.processDelete).on("click",".js-wp-mail-smtp-pro-logs-toggle-extra-details",o.single.processExtraDetailsToggle).on("click",".js-wp-mail-smtp-pro-logs-close-extra-details",o.single.processExtraDetailsClose),o.pageHolder.on("click","#wp-mail-smtp-delete-all-logs-button",o.archive.deleteAllEmailLogs)},single:{processDelete:function(){return confirm(wp_mail_smtp_logs.text_email_delete_sure)},processExtraDetailsToggle:function(){var e=i(this).closest(".postbox");e.hasClass("closed")?e.find(".inside").slideDown("fast",function(){e.removeClass("closed"),e.find(".handle-actions .dashicons").removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up")}):e.find(".inside").slideUp("fast",function(){e.addClass("closed"),e.find(".handle-actions .dashicons").removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")})},processExtraDetailsClose:function(e){i(e.target).closest(".postbox").find("h2.hndle:not(.closed)").click()}},archive:{ready:function(){o.archive.initFlatpickr()},deleteAllEmailLogs:function(e){e.preventDefault();var t=i(e.target);i.confirm({backgroundDismiss:!1,escapeKey:!0,animationBounce:1,theme:"modern",animateFromElement:!1,draggable:!1,closeIcon:!0,useBootstrap:!1,type:"orange",boxWidth:"450px",icon:'"></i><img src="'+wp_mail_smtp_logs.plugin_url+'/assets/images/font-awesome/exclamation-circle-solid-orange.svg" style="width: 40px; height: 40px;" alt="'+wp_mail_smtp_logs.icon+'"><i class="',title:wp_mail_smtp_logs.heads_up_title,content:wp_mail_smtp_logs.delete_all_email_logs_confirmation_text,buttons:{confirm:{text:wp_mail_smtp_logs.yes_text,btnClass:"wp-mail-smtp-btn wp-mail-smtp-btn-md wp-mail-smtp-btn-orange",keys:["enter"],action:function(){o.archive.executeAllEmailLogEntriesDeletion(t)}},cancel:{text:wp_mail_smtp_logs.cancel_text}}})},executeAllEmailLogEntriesDeletion:function(l){l.prop("disabled",!0);var e={action:"wp_mail_smtp_delete_all_log_entries",nonce:i("#wp-mail-smtp-delete-log-entries-nonce",o.pageHolder).val()};i.post(ajaxurl,e,function(e){var t,a,s,i=e.data;s=e.success?(t="check-circle-solid-green",a="green",function(){return location.reload(),!1}):(t="exclamation-circle-regular-red",a="red",function(){}),o.displayModal(i,t,a,s),l.prop("disabled",!1)}).fail(function(){o.displayModal(wp_mail_smtp_logs.error_occurred,"exclamation-circle-regular-red","red",function(){}),l.prop("disabled",!1)})},initFlatpickr:function(){var e={rangeSeparator:" - "},t={altInput:!0,altFormat:"M j, Y",dateFormat:"Y-m-d",mode:"range"};"undefined"!==flatpickr&&Object.prototype.hasOwnProperty.call(flatpickr,"l10ns")&&Object.prototype.hasOwnProperty.call(flatpickr.l10ns,wp_mail_smtp_logs.lang_code)&&((e=flatpickr.l10ns[wp_mail_smtp_logs.lang_code]).rangeSeparator=" - "),t.locale=e,i(".wp-mail-smtp-filter-date-selector").flatpickr(t)},resetFilter:function(){var e=i(this).parents("form");e.find(i(this).data("scope")).find("input,select").each(function(){var e=i(this);o.isIgnoredForResetInput(e)||o.resetInput(e)}),e.submit()}},displayModal:function(e,t,a,s){i.alert({backgroundDismiss:!0,escapeKey:!0,animationBounce:1,theme:"modern",type:a,animateFromElement:!1,draggable:!1,closeIcon:!0,useBootstrap:!1,title:!1,icon:'"></i><img src="'+wp_mail_smtp_logs.plugin_url+"/assets/images/font-awesome/"+t+'.svg" style="width: 40px; height: 40px;" alt="'+wp_mail_smtp_logs.icon+'"><i class="',content:e,boxWidth:"350px",buttons:{confirm:{text:wp_mail_smtp_logs.ok,btnClass:"btn-confirm",keys:["enter"],action:s}}})},resetInput:function(e){switch(e.prop("tagName").toLowerCase()){case"input":e.val("");break;case"select":e.val(e.find("option").first().val())}},isIgnoredForResetInput:function(e){return-1!==["submit","hidden"].indexOf((e.attr("type")||"").toLowerCase())&&!e.hasClass("flatpickr-input")}};return o}(document,(window,jQuery)),WPMailSMTP.Admin.Logs.init();